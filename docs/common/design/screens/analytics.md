# åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ (Analytics) ç”»é¢ä»•æ§˜

## 1. æ¦‚è¦

æ–½ç­–ã”ã¨ã®åå¿œç‡ã‚’å¯è¦–åŒ–ã—ã€PDCAã‚’å›ã™ãŸã‚ã®åˆ¤æ–­ææ–™ã‚’æä¾›ã™ã‚‹ç”»é¢ã€‚
ãƒªãƒƒãƒãªã‚°ãƒ©ãƒ•æç”»ã¯è¡Œã‚ãšã€é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã‚¯ãƒ­ã‚¹é›†è¨ˆè¡¨ï¼‰ã§å®Ÿè£…ã™ã‚‹ã€‚

---

## 2. ç”»é¢ä¸€è¦§

| ç”»é¢ | ãƒ‘ã‚¹ | èª¬æ˜ |
|------|------|------|
| æ–½ç­–åˆ¥åŠ¹æœæ¸¬å®š | `/analytics` | æ–‡é¢ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ |
| æœŸé–“åˆ¥æ¨ç§»ãƒ¬ãƒãƒ¼ãƒˆ | `/analytics/trends` | é€±æ¬¡ãƒ»æœˆæ¬¡ã®æˆæœæ¨ç§» |

---

## 3. æ–½ç­–åˆ¥åŠ¹æœæ¸¬å®šç”»é¢

### 3.1. ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ–½ç­–åˆ¥åŠ¹æœ]  [æœŸé–“åˆ¥æ¨ç§»]                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: [ã™ã¹ã¦ â–¼]  æœŸé–“: [ä»Šæœˆ â–¼]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ“Š æ–‡é¢ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ–‡é¢ãƒ‘ã‚¿ãƒ¼ãƒ³ â”‚é€ä¿¡æ•°â”‚é–‹å°æ•°â”‚é–‹å°ç‡ â”‚è¿”ä¿¡æ•°â”‚è¿”ä¿¡ç‡â”‚ã‚¢ãƒç²å¾—â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚Accountå‹   â”‚  45 â”‚  32 â”‚71.1% â”‚  12 â”‚26.7%â”‚   5   â”‚
â”‚  â”‚Masså‹      â”‚  97 â”‚  58 â”‚59.8% â”‚  11 â”‚11.3%â”‚   3   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚åˆè¨ˆ        â”‚ 142 â”‚  90 â”‚63.4% â”‚  23 â”‚16.2%â”‚   8   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  ğŸ’¡ ã‚¤ãƒ³ã‚µã‚¤ãƒˆ                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ Accountå‹ã¯è¿”ä¿¡ç‡ãŒMasså‹ã®2.4å€é«˜ã„                      â”‚   â”‚
â”‚  â”‚  â€¢ å£²ä¸Š10å„„å††ä»¥ä¸Šã®ä¼æ¥­ã¸ã®Accountå‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒåŠ¹æœçš„       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Š æ¥­ç•Œåˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ¥­ç•Œ     â”‚é€ä¿¡æ•°â”‚è¿”ä¿¡æ•°â”‚è¿”ä¿¡ç‡â”‚ã‚¢ãƒç²å¾—â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚IT       â”‚  58 â”‚  15 â”‚25.9%â”‚   4   â”‚
â”‚  â”‚è£½é€      â”‚  42 â”‚   5 â”‚11.9%â”‚   2   â”‚
â”‚  â”‚å•†ç¤¾     â”‚  25 â”‚   2 â”‚ 8.0%â”‚   1   â”‚
â”‚  â”‚é‡‘è     â”‚  12 â”‚   1 â”‚ 8.3%â”‚   1   â”‚
â”‚  â”‚ãã®ä»–   â”‚   5 â”‚   0 â”‚ 0.0%â”‚   0   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. æ–‡é¢ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |
|--------|--------------|
| æ–‡é¢ãƒ‘ã‚¿ãƒ¼ãƒ³ | `applied_type` ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ– |
| é€ä¿¡æ•° | `outbound_history` ã®ã‚«ã‚¦ãƒ³ãƒˆ |
| é–‹å°æ•° | ï¼ˆMVPã§ã¯å–å¾—ä¸å¯ã€å°†æ¥çš„ã«Resendã®Webhookã§å–å¾—ï¼‰ |
| é–‹å°ç‡ | é–‹å°æ•° / é€ä¿¡æ•° Ã— 100 |
| è¿”ä¿¡æ•° | `inbox_messages` ã®ã‚«ã‚¦ãƒ³ãƒˆï¼ˆtarget_idçµŒç”±ã§ç´ä»˜ã‘ï¼‰ |
| è¿”ä¿¡ç‡ | è¿”ä¿¡æ•° / é€ä¿¡æ•° Ã— 100 |
| ã‚¢ãƒç²å¾— | ï¼ˆMVPã§ã¯æ‰‹å‹•å…¥åŠ› or å›ºå®šå€¤ï¼‰ |

### 3.3. æ¥­ç•Œåˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |
|--------|--------------|
| æ¥­ç•Œ | `targets.industry` ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ– |
| é€ä¿¡æ•° | `outbound_history` ã®ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡æ•° | `inbox_messages` ã®ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡ç‡ | è¿”ä¿¡æ•° / é€ä¿¡æ•° Ã— 100 |
| ã‚¢ãƒç²å¾— | ï¼ˆMVPã§ã¯æ‰‹å‹•å…¥åŠ› or å›ºå®šå€¤ï¼‰ |

---

## 4. æœŸé–“åˆ¥æ¨ç§»ãƒ¬ãƒãƒ¼ãƒˆç”»é¢

### 4.1. ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ–½ç­–åˆ¥åŠ¹æœ]  [æœŸé–“åˆ¥æ¨ç§»]                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: [ã™ã¹ã¦ â–¼]  å˜ä½: [é€±æ¬¡ â–¼]  æœŸé–“: [éå»3ãƒ¶æœˆ â–¼]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ğŸ“ˆ é€±æ¬¡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¨ç§»                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æœŸé–“       â”‚é€ä¿¡æ•°â”‚è¿”ä¿¡æ•°â”‚è¿”ä¿¡ç‡ â”‚ã‚¢ãƒç²å¾—â”‚å‰é€±æ¯”      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚2024-W50   â”‚  42 â”‚   8 â”‚19.0% â”‚   3   â”‚ â†‘ +5.2%   â”‚
â”‚  â”‚2024-W49   â”‚  38 â”‚   5 â”‚13.2% â”‚   2   â”‚ â†“ -2.1%   â”‚
â”‚  â”‚2024-W48   â”‚  35 â”‚   6 â”‚17.1% â”‚   1   â”‚ â†‘ +8.3%   â”‚
â”‚  â”‚2024-W47   â”‚  28 â”‚   4 â”‚14.3% â”‚   2   â”‚ -         â”‚
â”‚  â”‚...        â”‚     â”‚     â”‚      â”‚       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Š æœˆæ¬¡ã‚µãƒãƒªãƒ¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æœŸé–“      â”‚é€ä¿¡æ•°â”‚è¿”ä¿¡æ•°â”‚è¿”ä¿¡ç‡ â”‚ã‚¢ãƒç²å¾—â”‚å‰æœˆæ¯”      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚2024å¹´12æœˆâ”‚  80 â”‚  13 â”‚16.3% â”‚   5   â”‚ â†‘ +18.2%  â”‚
â”‚  â”‚2024å¹´11æœˆâ”‚  62 â”‚  10 â”‚16.1% â”‚   3   â”‚ â†“ -5.0%   â”‚
â”‚  â”‚2024å¹´10æœˆâ”‚  55 â”‚   9 â”‚16.4% â”‚   2   â”‚ -         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2. é€±æ¬¡ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |
|--------|--------------|
| æœŸé–“ | ISOé€±ç•ªå·ï¼ˆYYYY-Wwwï¼‰ |
| é€ä¿¡æ•° | è©²å½“é€±ã® `outbound_history` ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡æ•° | è©²å½“é€±ã® `inbox_messages` ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡ç‡ | è¿”ä¿¡æ•° / é€ä¿¡æ•° Ã— 100 |
| ã‚¢ãƒç²å¾— | ï¼ˆMVPã§ã¯æ‰‹å‹•å…¥åŠ› or å›ºå®šå€¤ï¼‰ |
| å‰é€±æ¯” | (ä»Šé€±è¿”ä¿¡ç‡ - å‰é€±è¿”ä¿¡ç‡) / å‰é€±è¿”ä¿¡ç‡ Ã— 100 |

### 4.3. æœˆæ¬¡ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ  | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |
|--------|--------------|
| æœŸé–“ | YYYYå¹´MMæœˆ |
| é€ä¿¡æ•° | è©²å½“æœˆã® `outbound_history` ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡æ•° | è©²å½“æœˆã® `inbox_messages` ã‚«ã‚¦ãƒ³ãƒˆ |
| è¿”ä¿¡ç‡ | è¿”ä¿¡æ•° / é€ä¿¡æ•° Ã— 100 |
| ã‚¢ãƒç²å¾— | ï¼ˆMVPã§ã¯æ‰‹å‹•å…¥åŠ› or å›ºå®šå€¤ï¼‰ |
| å‰æœˆæ¯” | (ä»Šæœˆè¿”ä¿¡ç‡ - å‰æœˆè¿”ä¿¡ç‡) / å‰æœˆè¿”ä¿¡ç‡ Ã— 100 |

---

## 5. ãƒ‡ãƒ¼ã‚¿å–å¾—

### 5.1. æ–½ç­–åˆ¥é›†è¨ˆ

```typescript
const getPerformanceByType = async (filters: AnalyticsFilters) => {
  // é€ä¿¡æ•°ã‚’ã‚¿ã‚¤ãƒ—åˆ¥ã«é›†è¨ˆ
  const sentByType = await supabase
    .from('outbound_history')
    .select(`
      outbound_tasks!inner (
        applied_type
      )
    `)
    .gte('sent_at', filters.startDate)
    .lte('sent_at', filters.endDate);

  // è¿”ä¿¡æ•°ã‚’ã‚¿ã‚¤ãƒ—åˆ¥ã«é›†è¨ˆï¼ˆtarget_idçµŒç”±ï¼‰
  const repliesByType = await supabase
    .from('inbox_messages')
    .select(`
      targets!inner (
        id
      )
    `)
    .gte('received_at', filters.startDate)
    .lte('received_at', filters.endDate);

  // é›†è¨ˆå‡¦ç†
  const results = ['mass', 'account'].map(type => {
    const sent = sentByType.filter(s => s.outbound_tasks.applied_type === type).length;
    const replied = repliesByType.filter(r => /* ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿ */).length;

    return {
      type,
      sent,
      opened: 0, // MVPã§ã¯æœªå®Ÿè£…
      openRate: 0,
      replied,
      replyRate: sent > 0 ? (replied / sent * 100).toFixed(1) : 0,
      appointments: 0, // MVPã§ã¯æ‰‹å‹•å…¥åŠ›
    };
  });

  return results;
};
```

### 5.2. æœŸé–“åˆ¥é›†è¨ˆ

```typescript
const getWeeklyTrends = async (filters: AnalyticsFilters) => {
  const weeks = getWeeksInRange(filters.startDate, filters.endDate);

  const results = await Promise.all(
    weeks.map(async (week) => {
      const [sent, replied] = await Promise.all([
        supabase
          .from('outbound_history')
          .select('id', { count: 'exact' })
          .gte('sent_at', week.start)
          .lt('sent_at', week.end),
        supabase
          .from('inbox_messages')
          .select('id', { count: 'exact' })
          .gte('received_at', week.start)
          .lt('received_at', week.end),
      ]);

      return {
        period: week.label,
        sent: sent.count,
        replied: replied.count,
        replyRate: sent.count > 0 ? (replied.count / sent.count * 100).toFixed(1) : 0,
        appointments: 0,
      };
    })
  );

  // å‰é€±æ¯”ã‚’è¨ˆç®—
  return results.map((r, i) => ({
    ...r,
    change: i > 0
      ? ((r.replyRate - results[i - 1].replyRate) / results[i - 1].replyRate * 100).toFixed(1)
      : null,
  }));
};
```

---

## 6. ãƒ•ã‚£ãƒ«ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³

### 6.1. æœŸé–“ãƒ—ãƒªã‚»ãƒƒãƒˆ

```typescript
const periodOptions = [
  { value: 'this_week', label: 'ä»Šé€±' },
  { value: 'this_month', label: 'ä»Šæœˆ' },
  { value: 'last_month', label: 'å…ˆæœˆ' },
  { value: 'last_3_months', label: 'éå»3ãƒ¶æœˆ' },
  { value: 'last_6_months', label: 'éå»6ãƒ¶æœˆ' },
  { value: 'this_year', label: 'ä»Šå¹´' },
];
```

### 6.2. é›†è¨ˆå˜ä½

```typescript
const unitOptions = [
  { value: 'daily', label: 'æ—¥æ¬¡' },
  { value: 'weekly', label: 'é€±æ¬¡' },
  { value: 'monthly', label: 'æœˆæ¬¡' },
];
```

---

## 7. MVPåˆ¶é™äº‹é …

| æ©Ÿèƒ½ | MVPå¯¾å¿œ | å‚™è€ƒ |
|------|:-------:|------|
| é–‹å°æ•°ãƒ»é–‹å°ç‡ | âŒ | Resendã®Webhooké€£æºã§å°†æ¥å¯¾å¿œ |
| ã‚¢ãƒç²å¾—æ•° | â–³ | æ‰‹å‹•å…¥åŠ› or å›ºå®šå€¤ |
| ã‚°ãƒ©ãƒ•è¡¨ç¤º | âŒ | ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ |
| CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | â–³ | å°†æ¥å¯¾å¿œ |

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [å…¨ä½“è¦ä»¶å®šç¾©æ›¸](../../overview/requirements.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](../../technical/database-schema.md)
- [ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚¿ã‚¹ã‚¯ç”»é¢](./outbound-tasks.md)

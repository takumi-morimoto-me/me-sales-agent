# å—ä¿¡ãƒˆãƒ¬ã‚¤ (Inbox) ç”»é¢ä»•æ§˜

## 1. æ¦‚è¦

é¡§å®¢ã‹ã‚‰ã®è¿”ä¿¡ã¸ã®å¯¾å¿œã‚’è¡Œã†ç”»é¢ã€‚
è‡ªå‹•è¿”ä¿¡ãƒ»è‡ªå‹•æ—¥ç¨‹èª¿æ•´ã¯å®Ÿè£…ã›ãšã€AIè¿”ä¿¡ææ¡ˆã¨æ‰‹å‹•é€ä¿¡ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ¡ç”¨ã€‚

---

## 2. ç”»é¢ä¸€è¦§

| ç”»é¢ | ãƒ‘ã‚¹ | èª¬æ˜ |
|------|------|------|
| å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ | `/inbox` | è¿”ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆ |

---

## 3. å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ç”»é¢

### 3.1. ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å—ä¿¡ãƒˆãƒ¬ã‚¤                                        [+ æ‰‹å‹•ç™»éŒ²]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯¾å¿œçŠ¶æ³: [ã™ã¹ã¦ â–¼]  æ—¢èª­: [ã™ã¹ã¦ â–¼]  ğŸ” æ¤œç´¢...                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¸æŠä¸­: 2ä»¶  [æ—¢èª­ã«ã™ã‚‹] [å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹]                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚â–¡â”‚çŠ¶æ…‹â”‚é€ä¿¡å…ƒ           â”‚ä»¶å              â”‚å—ä¿¡æ—¥æ™‚  â”‚å¯¾å¿œ  â”‚
â”‚  â”œâ”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  â”‚â˜‘â”‚ â— â”‚å±±ç”°å¤ªéƒ          â”‚Re: æ¥­å‹™åŠ¹ç‡åŒ–ã®... â”‚12/10 15:30â”‚æœªå¯¾å¿œâ”‚
â”‚  â”‚ â”‚   â”‚info@abc.co.jp    â”‚                  â”‚         â”‚     â”‚
â”‚  â”œâ”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  â”‚â˜‘â”‚ â—‹ â”‚éˆ´æœ¨èŠ±å­          â”‚Re: ãƒ„ãƒ¼ãƒ«å°å…¥ã®... â”‚12/10 14:00â”‚æœªå¯¾å¿œâ”‚
â”‚  â”‚ â”‚   â”‚contact@def.co.jp â”‚                  â”‚         â”‚     â”‚
â”‚  â”œâ”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  â”‚ â”‚ â—‹ â”‚ä½è—¤ä¸€éƒ          â”‚Re: DXæ¨é€²ã®ã”... â”‚12/09 18:00â”‚å¯¾å¿œæ¸ˆâ”‚
â”‚  â”‚ â”‚   â”‚sales@ghi.co.jp   â”‚                  â”‚         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  è¡¨ç¤º: 1-20 / 23ä»¶                     â† 1 2 â†’                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2. ãƒ†ãƒ¼ãƒ–ãƒ«ã‚«ãƒ©ãƒ å®šç¾©

| ã‚«ãƒ©ãƒ  | å‹ | å¹… | ã‚½ãƒ¼ãƒˆ | ãƒ•ã‚£ãƒ«ã‚¿ | èª¬æ˜ |
|--------|-----|-----|:------:|:-------:|------|
| ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ | Checkbox | 40px | - | - | ä¸€æ‹¬æ“ä½œç”¨ |
| çŠ¶æ…‹ | Dot | 30px | - | - | â— æœªèª­ / â—‹ æ—¢èª­ |
| é€ä¿¡å…ƒ | Text (2è¡Œ) | 180px | - | - | åå‰ + ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| ä»¶å | Text | 250px | - | æ¤œç´¢ | `subject` ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º |
| å—ä¿¡æ—¥æ™‚ | DateTime | 100px | âœ“ | - | `received_at` |
| å¯¾å¿œçŠ¶æ³ | Badge | 80px | - | âœ“ | `unresponded` / `responded` |

### 3.3. ãƒ•ã‚£ãƒ«ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³

#### å¯¾å¿œçŠ¶æ³

```typescript
const statusOptions = [
  { value: 'all', label: 'ã™ã¹ã¦' },
  { value: 'unresponded', label: 'æœªå¯¾å¿œ' },
  { value: 'responded', label: 'å¯¾å¿œæ¸ˆã¿' },
];
```

#### æ—¢èª­çŠ¶æ…‹

```typescript
const readOptions = [
  { value: 'all', label: 'ã™ã¹ã¦' },
  { value: 'unread', label: 'æœªèª­ã®ã¿' },
  { value: 'read', label: 'æ—¢èª­ã®ã¿' },
];
```

### 3.4. ä¸€æ‹¬æ“ä½œ

| æ“ä½œ | èª¬æ˜ |
|------|------|
| æ—¢èª­ã«ã™ã‚‹ | é¸æŠã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® `is_read` ã‚’ `true` ã« |
| å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹ | é¸æŠã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® `response_status` ã‚’ `responded` ã« |

---

## 4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«

### 4.1. ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸                                         [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€ é€ä¿¡å…ƒæƒ…å ± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  é€ä¿¡è€…:   å±±ç”°å¤ªéƒ                                        â”‚â”‚
â”‚  â”‚  ãƒ¡ãƒ¼ãƒ«:   info@abc.co.jp                                  â”‚â”‚
â”‚  â”‚  ä¼æ¥­:     æ ªå¼ä¼šç¤¾ABCï¼ˆé–¢é€£ä»˜ã‘æ¸ˆã¿ï¼‰                     â”‚â”‚
â”‚  â”‚  å—ä¿¡æ—¥æ™‚: 2024/12/10 15:30                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ ä»¶å â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Re: æ¥­å‹™åŠ¹ç‡åŒ–ã«ã¤ã„ã¦ã®ã”ææ¡ˆ                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ æœ¬æ–‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚                                  â”‚â”‚
â”‚  â”‚  æ ªå¼ä¼šç¤¾ABCã®å±±ç”°ã§ã™ã€‚                                   â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â”‚  ã”é€£çµ¡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚                              â”‚â”‚
â”‚  â”‚  ã”ææ¡ˆã„ãŸã ã„ãŸå†…å®¹ã«ã¤ã„ã¦ã€è©³ã—ããŠè©±ã‚’ä¼ºã„ãŸã„ã¨      â”‚â”‚
â”‚  â”‚  è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚                                          â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â”‚  æ¥é€±ã®ã©ã“ã‹ã§ãŠæ™‚é–“ã„ãŸã ã‘ã¾ã™ã§ã—ã‚‡ã†ã‹ã€‚              â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â”‚  ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€ è¿”ä¿¡ã‚’ä½œæˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  [AIè¿”ä¿¡ææ¡ˆ]  [ç©ºãæ™‚é–“ã‚’æŒ¿å…¥]                            â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â”‚  ä»¶å: [Re: æ¥­å‹™åŠ¹ç‡åŒ–ã«ã¤ã„ã¦ã®ã”ææ¡ˆ               ]     â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â”‚  æœ¬æ–‡:                                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚                                                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                      â”‚ â”‚â”‚
â”‚  â”‚  â”‚                                                      â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                 â”‚
â”‚                              [å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹]  [è¿”ä¿¡ã‚’é€ä¿¡]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³

| ãƒœã‚¿ãƒ³ | å‹•ä½œ |
|--------|------|
| AIè¿”ä¿¡ææ¡ˆ | Gemini APIã§è¿”ä¿¡æ–‡æ¡ˆã‚’ç”Ÿæˆã—ã€æœ¬æ–‡æ¬„ã«æŒ¿å…¥ |
| ç©ºãæ™‚é–“ã‚’æŒ¿å…¥ | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æºã‹ã‚‰ç©ºãæ™‚é–“ã‚’ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¦æŒ¿å…¥ |
| å¯¾å¿œæ¸ˆã¿ã«ã™ã‚‹ | `response_status` ã‚’ `responded` ã«å¤‰æ›´ |
| è¿”ä¿¡ã‚’é€ä¿¡ | Resend APIã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡ |

---

## 5. AIè¿”ä¿¡ææ¡ˆæ©Ÿèƒ½

### 5.1. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

```typescript
const generateReplyPrompt = (originalMessage: InboxMessage, context: Context) => `
ã‚ãªãŸã¯å–¶æ¥­æ‹…å½“è€…ã®ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚
ä»¥ä¸‹ã®å—ä¿¡ãƒ¡ãƒ¼ãƒ«ã«å¯¾ã™ã‚‹è¿”ä¿¡æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€å—ä¿¡ãƒ¡ãƒ¼ãƒ«ã€‘
ä»¶å: ${originalMessage.subject}
æœ¬æ–‡:
${originalMessage.body}

ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€‘
å•†æ: ${context.productDescription}
é€ä¿¡å…ƒä¼æ¥­: ${context.companyName}

ã€æŒ‡ç¤ºã€‘
- ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒ¼ãƒ«ã¨ã—ã¦é©åˆ‡ãªæ•¬èªã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
- ç›¸æ‰‹ã®è³ªå•ã‚„è¦æœ›ã«å¯¾ã—ã¦å…·ä½“çš„ã«å›ç­”ã—ã¦ãã ã•ã„
- å¿…è¦ã«å¿œã˜ã¦æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæ‰“ã¡åˆã‚ã›æ—¥ç¨‹ã®èª¿æ•´ãªã©ï¼‰ã‚’ææ¡ˆã—ã¦ãã ã•ã„
- ç°¡æ½”ã«ã€3-5æ®µè½ç¨‹åº¦ã§ä½œæˆã—ã¦ãã ã•ã„

è¿”ä¿¡æœ¬æ–‡ã®ã¿ã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
`;
```

### 5.2. ç”Ÿæˆå‡¦ç†

```typescript
const generateReply = async (messageId: string) => {
  const message = await getMessage(messageId);
  const target = message.target_id ? await getTarget(message.target_id) : null;
  const project = target ? await getProject(target.project_id) : null;

  const prompt = generateReplyPrompt(message, {
    productDescription: project?.product_description || '',
    companyName: target?.company_name || '',
  });

  const response = await gemini.generateContent(prompt);

  return response.text();
};
```

---

## 6. ç©ºãæ™‚é–“æŒ¿å…¥æ©Ÿèƒ½

### 6.1. ç”»é¢æ§‹æˆï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å†…ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç©ºãæ™‚é–“ã‚’é¸æŠ                                     [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æœŸé–“: [æ¥é€± â–¼]                                            â”‚
â”‚                                                             â”‚
â”‚  â–¡ 12/16ï¼ˆæœˆï¼‰10:00-11:00                                  â”‚
â”‚  â˜‘ 12/16ï¼ˆæœˆï¼‰14:00-15:00                                  â”‚
â”‚  â˜‘ 12/17ï¼ˆç«ï¼‰10:00-11:00                                  â”‚
â”‚  â–¡ 12/17ï¼ˆç«ï¼‰15:00-16:00                                  â”‚
â”‚  â˜‘ 12/18ï¼ˆæ°´ï¼‰13:00-14:00                                  â”‚
â”‚                                                             â”‚
â”‚  ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ä¸‹è¨˜ã®æ—¥ç¨‹ã§ã”éƒ½åˆã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚               â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ ãƒ»12/16ï¼ˆæœˆï¼‰14:00-15:00                            â”‚   â”‚
â”‚  â”‚ ãƒ»12/17ï¼ˆç«ï¼‰10:00-11:00                            â”‚   â”‚
â”‚  â”‚ ãƒ»12/18ï¼ˆæ°´ï¼‰13:00-14:00                            â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚ ã”éƒ½åˆã®è‰¯ã„æ—¥æ™‚ã‚’ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [æŒ¿å…¥]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2. ç”Ÿæˆãƒ†ã‚­ã‚¹ãƒˆ

```typescript
const formatAvailableSlots = (slots: TimeSlot[]) => {
  const header = 'ä¸‹è¨˜ã®æ—¥ç¨‹ã§ã”éƒ½åˆã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚\n\n';
  const body = slots
    .map(slot => `ãƒ»${formatDate(slot.date)}ï¼ˆ${getDayOfWeek(slot.date)}ï¼‰${slot.startTime}-${slot.endTime}`)
    .join('\n');
  const footer = '\n\nã”éƒ½åˆã®è‰¯ã„æ—¥æ™‚ã‚’ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚';

  return header + body + footer;
};
```

---

## 7. æ‰‹å‹•ç™»éŒ²ãƒ¢ãƒ¼ãƒ€ãƒ«

### 7.1. ç”»é¢æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç™»éŒ²                                   [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  é€ä¿¡è€…å:       [                                   ]      â”‚
â”‚  ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: [                                   ] *    â”‚
â”‚                                                             â”‚
â”‚  é–¢é€£ä¼æ¥­:       [ä¼æ¥­ã‚’é¸æŠ â–¼]  ï¼ˆä»»æ„ï¼‰                  â”‚
â”‚                                                             â”‚
â”‚  å—ä¿¡æ—¥æ™‚:       [2024/12/10] [15:30]                      â”‚
â”‚                                                             â”‚
â”‚  ä»¶å:           [                                   ]      â”‚
â”‚                                                             â”‚
â”‚  æœ¬æ–‡: *                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ç™»éŒ²]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ãƒ‡ãƒ¼ã‚¿æ“ä½œ

### 8.1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§å–å¾—

```typescript
const getInboxMessages = async (filters: InboxFilters) => {
  let query = supabase
    .from('inbox_messages')
    .select(`
      *,
      targets (
        company_name,
        project_id
      )
    `)
    .order('received_at', { ascending: false });

  if (filters.responseStatus && filters.responseStatus !== 'all') {
    query = query.eq('response_status', filters.responseStatus);
  }

  if (filters.isRead === 'unread') {
    query = query.eq('is_read', false);
  } else if (filters.isRead === 'read') {
    query = query.eq('is_read', true);
  }

  if (filters.search) {
    query = query.or(`subject.ilike.%${filters.search}%,body.ilike.%${filters.search}%`);
  }

  return query.range(filters.offset, filters.offset + filters.limit - 1);
};
```

### 8.2. è¿”ä¿¡é€ä¿¡

```typescript
const sendReply = async (messageId: string, reply: ReplyInput) => {
  const message = await getMessage(messageId);

  // Resend APIã§ãƒ¡ãƒ¼ãƒ«é€ä¿¡
  await resend.emails.send({
    from: 'sales@example.com',
    to: message.from_email,
    subject: reply.subject,
    text: reply.body,
    replyTo: message.from_email,
  });

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
  await supabase
    .from('inbox_messages')
    .update({
      response_status: 'responded',
      updated_at: new Date().toISOString(),
    })
    .eq('id', messageId);
};
```

---

## 9. MVPåˆ¶é™äº‹é …

| æ©Ÿèƒ½ | MVPå¯¾å¿œ | å‚™è€ƒ |
|------|:-------:|------|
| ãƒ¡ãƒ¼ãƒ«è‡ªå‹•å–ã‚Šè¾¼ã¿ | âŒ | æ‰‹å‹•ç™»éŒ²ã®ã¿ |
| ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é€£æº | â–³ | å°†æ¥çš„ã«Google Calendar APIé€£æº |
| ã‚¹ãƒ¬ãƒƒãƒ‰è¡¨ç¤º | âŒ | å˜ä¸€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ |
| æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« | âŒ | å°†æ¥å¯¾å¿œ |

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [å…¨ä½“è¦ä»¶å®šç¾©æ›¸](../../overview/requirements.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](../../technical/database-schema.md)
- [ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚¿ã‚¹ã‚¯ç”»é¢](./outbound-tasks.md)

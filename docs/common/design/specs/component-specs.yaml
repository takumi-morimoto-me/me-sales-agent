# AIネイティブCMS コンポーネント実装値
#
# このファイルは、UIコンポーネント（Button, Card, Modal等）の具体的な実装値を記録します。
# "_TBD_" を具体値に置き換えてください。
#
# 参照元:
# - docs/common/design/design-system.md
# - CLAUDE.md（更新ルール）

metadata:
  version: "1.3"
  last_updated: "2025-12-05"
  description: "UIコンポーネントの実装値（Button, Card, Sidebar, ArticlesTable, ChatPanel, MediaOnboarding等）"

# ===================================
# Sidebar関連コンポーネント
# ===================================
sidebar_components:
  # SidebarMenuButton
  sidebar_menu_button:
    height: "36px"  # !h-9
    padding: "8px"  # px-2
    active_state:
      background: "var(--sidebar-accent)"  # bg-sidebar-accent
      text_color: "var(--sidebar-accent-foreground)"  # text-sidebar-accent-foreground
    hover_state:
      background: "var(--sidebar-accent)"  # hover:bg-sidebar-accent
      text_color: "var(--sidebar-accent-foreground)"  # hover:text-sidebar-accent-foreground
    implementation_notes: |
      - className="!h-9 px-2" で高さとパディングを指定
      - isActive propでアクティブ状態を制御

  # SidebarHeader
  sidebar_header:
    padding: "8px"  # p-2（デフォルト）
    padding_override: "8px 0 8px 8px"  # p-2 pr-0（右パディング削除でアイコン収容）
    gap: "8px"  # gap-2
    implementation_notes: |
      - デフォルトのp-2では右側8pxパディングがあり、48px幅に32pxアイコンが入りきらない
      - className="p-2 pr-0" で右パディングのみ削除

  # SidebarFooter
  sidebar_footer:
    padding: "8px"  # p-2（デフォルト）
    padding_override: "8px 0 8px 8px"  # p-2 pr-0（右パディング削除でアイコン収容）
    implementation_notes: |
      - SidebarHeaderと同じ理由でpr-0を適用

  # SidebarGroupContent
  sidebar_group_content:
    padding: "0"  # px-0（左右パディングなし）
    gap: "4px"  # !gap-1
    implementation_notes: |
      - デフォルトのpx-1.5 md:px-0から変更
      - className="px-0" で統一

  # SidebarMenu
  sidebar_menu:
    gap: "4px"  # !gap-1
    implementation_notes: |
      - className="!gap-1" で要素間のスペースを設定

# ===================================
# Button
# ===================================
button:
  # 基本ボタン
  default:
    height: "_TBD_"
    padding: "_TBD_"
    border_radius: "_TBD_"
    font_size: "_TBD_"
    font_weight: "_TBD_"
    background_color: "_TBD_"
    text_color: "_TBD_"
    border: "_TBD_"

  # バリアント
  variants:
    primary:
      background_color: "_TBD_"
      text_color: "_TBD_"
      hover_background: "_TBD_"
    secondary:
      background_color: "_TBD_"
      text_color: "_TBD_"
      hover_background: "_TBD_"
    outline:
      background_color: "_TBD_"
      text_color: "_TBD_"
      border: "_TBD_"
      hover_background: "_TBD_"
    ghost:
      background_color: "transparent"
      text_color: "_TBD_"
      hover_background: "_TBD_"

  # サイズ
  sizes:
    sm:
      height: "_TBD_"
      padding: "_TBD_"
      font_size: "_TBD_"
    md:
      height: "_TBD_"
      padding: "_TBD_"
      font_size: "_TBD_"
    lg:
      height: "_TBD_"
      padding: "_TBD_"
      font_size: "_TBD_"
    icon:
      height: "28px"  # h-7
      width: "28px"   # w-7
      padding: "0"

  # 状態
  states:
    disabled:
      opacity: "_TBD_"
      cursor: "not-allowed"
    loading:
      opacity: "_TBD_"
      cursor: "wait"

# ===================================
# Card
# ===================================
card:
  border_radius: "_TBD_"
  border: "_TBD_"
  background_color: "_TBD_"
  padding: "_TBD_"
  shadow: "_TBD_"

  # CardHeader
  header:
    padding: "_TBD_"
    border_bottom: "_TBD_"

  # CardContent
  content:
    padding: "_TBD_"

  # CardFooter
  footer:
    padding: "_TBD_"
    border_top: "_TBD_"

# ===================================
# Modal / Dialog
# ===================================
modal:
  overlay:
    background_color: "_TBD_"
    opacity: "_TBD_"
    z_index: "_TBD_"

  content:
    max_width: "_TBD_"
    border_radius: "_TBD_"
    background_color: "_TBD_"
    padding: "_TBD_"
    shadow: "_TBD_"

  header:
    padding: "_TBD_"
    border_bottom: "_TBD_"

  body:
    padding: "_TBD_"

  footer:
    padding: "_TBD_"
    border_top: "_TBD_"

# ===================================
# Input / Form
# ===================================
input:
  height: "_TBD_"
  padding: "_TBD_"
  border: "_TBD_"
  border_radius: "_TBD_"
  background_color: "_TBD_"
  text_color: "_TBD_"
  font_size: "_TBD_"

  states:
    focus:
      border_color: "_TBD_"
      ring: "_TBD_"
    error:
      border_color: "_TBD_"
    disabled:
      background_color: "_TBD_"
      opacity: "_TBD_"

# ===================================
# Breadcrumb
# ===================================
breadcrumb:
  separator:
    margin: "_TBD_"
    color: "_TBD_"

  item:
    font_size: "_TBD_"
    color: "_TBD_"
    hover_color: "_TBD_"

  current:
    font_weight: "_TBD_"
    color: "_TBD_"

# ===================================
# Separator
# ===================================
separator:
  vertical:
    height: "16px"  # h-4（data-[orientation=vertical]:h-4で指定）
    width: "1px"
    background_color: "var(--border)"

  horizontal:
    height: "1px"
    width: "100%"
    background_color: "var(--border)"

# ===================================
# Switch
# ===================================
switch:
  width: "_TBD_"
  height: "_TBD_"
  border_radius: "_TBD_"
  background_color_off: "_TBD_"
  background_color_on: "_TBD_"

  thumb:
    size: "_TBD_"
    background_color: "_TBD_"

# ===================================
# Articles Table (カスタムテーブルコンポーネント)
# ===================================
articles_table:
  # EditableHeader - カスタムカラムのヘッダー編集
  editable_header:
    display: "flex items-center gap-1 group"
    label:
      font_size: "text-xs"
      font_weight: "font-medium"
      color: "text-muted-foreground"
      hover_color: "hover:text-foreground"
      cursor: "cursor-text"
    delete_button:
      size: "h-4 w-4"
      icon_size: "h-3 w-3"
      opacity: "opacity-0 group-hover:opacity-100"
      transition: "transition-opacity"
    input:
      height: "h-6"
      font_size: "text-xs"
      padding: "px-1.5 py-0.5"
      width: "w-24"
    implementation_notes: |
      - カラムヘッダーをクリックするとインライン編集モードになる
      - Enter で保存、Escape でキャンセル
      - ホバー時に削除ボタン表示

  # EditableCell - カスタムカラムのセル値編集
  editable_cell:
    display: "text-left w-full truncate"
    font_size: "text-xs"
    color: "text-muted-foreground"
    hover_color: "hover:text-foreground"
    cursor: "cursor-text"
    input:
      height: "h-6"
      font_size: "text-xs"
      padding: "px-1.5 py-0.5"
      width: "w-full"
    implementation_notes: |
      - セルをクリックするとインライン編集モードになる
      - Enter で保存、Escape でキャンセル
      - 値はlocalStorageに保存される

  # TypedCell - 複数入力タイプ対応のセル
  typed_cell:
    supported_types:
      - "text"        # フリーテキスト
      - "number"      # 数値入力
      - "select"      # 単一選択
      - "multiSelect" # 複数選択（チップ表示）
      - "date"        # 日付
      - "url"         # URL
      - "email"       # メール
      - "checkbox"    # チェックボックス
    chip_colors:
      - "bg-blue-100 text-blue-800"
      - "bg-green-100 text-green-800"
      - "bg-yellow-100 text-yellow-800"
      - "bg-red-100 text-red-800"
      - "bg-purple-100 text-purple-800"
      - "bg-pink-100 text-pink-800"
      - "bg-indigo-100 text-indigo-800"
      - "bg-gray-100 text-gray-800"
    implementation_notes: |
      - カスタムカラムの入力タイプに応じてセルUIを切り替え
      - selectは単一選択ドロップダウン
      - multiSelectは複数選択可能でチップ表示
      - 値はJSON文字列化してlocalStorageに保存

  # EditableArticleCell - 既存カラムのインライン編集
  editable_article_cell:
    field_types:
      text: "フリーテキスト（タイトル、カテゴリ、キーワード）"
      number: "数値（文字数、リライト回数等）"
      select: "単一選択（ステータス）"
      date: "日付（公開日、リライト日等）"
    display:
      normal: "cursor-pointer hover:bg-muted/50 rounded px-1 py-0.5"
      edited: "bg-yellow-50 dark:bg-yellow-900/20"
    input:
      height: "h-7"
      font_size: "text-xs"
    implementation_notes: |
      - ダブルクリックで編集モードに切り替え
      - Enter で保存、Escape でキャンセル
      - 編集済みセルは黄色背景でハイライト
      - 元の値はツールチップで表示
      - 値はlocalStorageに保存（Supabase未連携）

  # AddColumnDialog - カラム追加ダイアログ
  add_column_dialog:
    title: "新しいカラムを追加"
    fields:
      - "カラム名（必須）"
      - "入力タイプ（8種類から選択）"
      - "選択肢（select/multiSelect用）"
    implementation_notes: |
      - shadcn/ui Dialogを使用
      - 入力タイプに応じて選択肢設定UIを表示

  # カラム幅設定
  column_widths:
    min_width: "160px"      # w(40) = 40 * 4px = 160px
    checkbox_width: "40px"  # w(10) = 10 * 4px = 40px
    default_sizes:
      title: "320px"        # w(80)
      status: "160px"       # w(40)
      category: "160px"     # w(40)
      targetKeyword: "160px" # w(40)
      createdBy: "160px"    # w(40)
      wordCount: "160px"    # w(40)
      rewriteCount: "160px" # w(40)
      rewrittenAt: "160px"  # w(40)
      nextRewriteAt: "160px" # w(40)
      publishedAt: "160px"  # w(40)
      viewCount: "160px"    # w(40)
      clickCount: "160px"   # w(40)
    implementation_notes: |
      - Tailwindスペーシングスケール準拠: 1単位 = 4px
      - 最小幅を160px（w-40相当）に統一
      - タイトルのみ320px（w-80相当）

  # カスタムカラム設定
  custom_columns:
    default_width: "120px"  # w(30) = 30 * 4px
    min_width: "160px"      # MIN_COLUMN_WIDTH
    storage_keys:
      column_order: "articles-table-column-order"
      column_visibility: "articles-table-column-visibility"
      custom_columns: "articles-table-custom-columns"
      custom_cell_values: "articles-table-custom-cell-values"
      article_edits: "articles-table-article-edits"
    implementation_notes: |
      - @tanstack/react-table を使用
      - @dnd-kit でカラムのドラッグ＆ドロップ
      - 全ての設定はlocalStorageに永続化
      - 人間とAIの両方が使用可能なUI
      - 既存カラムの編集もlocalStorageに保存

# ===================================
# ChatPanel コンポーネント
# ===================================
chat_panel:
  # レイアウトモード
  layouts:
    full:
      description: "通常の全画面チャット用"
      padding: "16px"  # p-4
      header_height: "44px"  # h-11
      input_height: "100px"  # h-[100px]
    compact:
      description: "サイドバーや狭いスペース用"
      padding: "8px"  # p-2
      header_height: "40px"  # h-10
      input_height: "100px"  # h-[100px]

  # ChatMessage コンポーネント
  chat_message:
    full:
      avatar_size: "32px"  # w-8 h-8
      text_size: "14px"  # text-sm
      timestamp_size: "12px"  # text-xs
      gap: "12px"  # gap-3
    compact:
      avatar_size: "24px"  # w-6 h-6
      text_size: "12px"  # text-xs
      timestamp_size: "11px"  # text-[11px]
      gap: "8px"  # gap-2

  # ChatInput コンポーネント
  chat_input:
    full:
      height: "100px"  # h-[100px]
      padding: "16px"  # p-4
      font_size: "14px"  # text-sm
      icon_size: "16px"  # h-4 w-4
      button_size: "32px"  # h-8 w-8
    compact:
      height: "100px"  # h-[100px]
      padding: "8px"  # p-2
      font_size: "12px"  # text-xs
      icon_size: "14px"  # h-3.5 w-3.5
      button_size: "24px"  # h-6 w-6

  # ChatHeader コンポーネント
  chat_header:
    full:
      height: "44px"  # h-11
      padding: "8px 12px"  # px-3 py-2
      title_size: "14px"  # text-sm
      button_height: "36px"  # h-9
    compact:
      height: "40px"  # h-10
      padding: "8px"  # p-2
      title_size: "12px"  # text-xs
      button_height: "32px"  # h-8

  implementation_notes: |
    - layout="compact" propでコンパクトモードを有効化
    - サイドバーやResizablePanelに配置する場合はcompactを使用
    - 提案ごとに新しいチャットを作成（suggestionIdで関連付け）
    - 実装ファイル:
      - apps/admin/src/components/chat/panel/chat-panel.tsx
      - apps/admin/src/components/chat/core/chat-message.tsx
      - apps/admin/src/components/chat/core/chat-input.tsx
      - apps/admin/src/components/chat/panel/chat-header.tsx

# ===================================
# IssueCanvas コンポーネント
# ===================================
issue_canvas:
  description: "サイトレポートの課題詳細表示パネル"
  width:
    default: "50%"  # ResizablePanelのdefaultSize
    min: "30%"
  header:
    padding: "16px 24px"  # p-4 md:p-6
    title_size: "16px"  # text-base md:text-lg
  content:
    padding: "16px 24px"  # p-4 md:p-6
    section_gap: "24px"  # space-y-6
  sections:
    - "ガイダンス"  # 修正手順のステップリスト
    - "影響URL"  # 問題のあるURLリスト（進捗バー付き）
    - "AIに相談"  # ChatPanelへの連携ボタン
  implementation_notes: |
    - ResizablePanelGroup内の右パネルとして表示
    - 課題カードクリックで開く
    - 実装ファイル: apps/admin/src/components/analytics/issue-canvas.tsx

# ===================================
# MediaOnboarding コンポーネント
# ===================================
media_onboarding:
  description: "新規メディア立ち上げ時のオンボーディング画面"

  # レイアウト
  layout:
    type: "ResizablePanelGroup"
    direction: "horizontal"
    panels:
      chat:
        default_size: "50%"
        min_size: "30%"
      design_memo:
        default_size: "50%"
        min_size: "30%"

  # チャットエリア
  chat_area:
    padding: "24px"  # p-6
    input:
      height: "100px"  # h-[100px]
      padding: "16px"  # p-4
    message_gap: "16px"  # gap-4

  # デザインメモエリア
  design_memo:
    padding: "24px"  # p-6
    tabs:
      height: "40px"  # h-10
      items:
        - label: "基本情報"
          key: "basic"
        - label: "リサーチ"
          key: "research"
        - label: "戦略"
          key: "strategy"
    content:
      padding: "16px"  # p-4
      section_gap: "12px"  # space-y-3

  # タブ内のコンテンツ構造
  tab_content:
    basic_info:
      fields:
        - key: "name"
          label: "メディア名"
        - key: "industry"
          label: "業界・分野"
        - key: "targetAudience"
          label: "ターゲット読者"
        - key: "purpose"
          label: "目的"
        - key: "updateFrequency"
          label: "更新頻度"
    research:
      sections:
        - key: "referenceSites"
          label: "参考サイト"
          type: "site_list"
        - key: "competitorSites"
          label: "競合サイト"
          type: "site_list"
        - key: "marketInsights"
          label: "市場の気づき"
          type: "string_list"
    strategy:
      fields:
        - key: "differentiation"
          label: "差別化ポイント"
          type: "string_list"
        - key: "contentDirection"
          label: "コンテンツ方針"
          type: "policy_list"
        - key: "topicIdeas"
          label: "トピック案"
          type: "string_list"
        - key: "articleLength"
          label: "記事の文字数"
        - key: "writerSetup"
          label: "ライター体制"

  # 作成ボタン
  create_button:
    height: "48px"  # h-12
    width: "100%"  # w-full
    font_size: "16px"  # text-base
    font_weight: "600"  # font-semibold

  implementation_notes: |
    - ResizablePanelGroupでリサイズ可能な2カラムレイアウト
    - 左: AIチャット（ChatPanel相当）
    - 右: デザインメモ（3タブ切り替え）
    - 会話から情報を抽出しリアルタイムで右パネルに反映
    - Hydration Error対策: タブはクライアントサイドでのみレンダリング
    - 実装ファイル:
      - apps/admin/src/components/chat/media-onboarding/media-onboarding.tsx（親コンポーネント）
      - apps/admin/src/components/chat/media-onboarding/design-memo/design-memo-tabs.tsx（タブコンテナ）
      - apps/admin/src/components/chat/media-onboarding/design-memo/basic-info-tab.tsx（基本情報タブ）
      - apps/admin/src/components/chat/media-onboarding/design-memo/research-tab.tsx（リサーチタブ）
      - apps/admin/src/components/chat/media-onboarding/design-memo/strategy-tab.tsx（戦略タブ）
    - 型定義: apps/admin/src/types/onboarding.ts
    - 詳細仕様: docs/common/components/screens/media-onboarding.md

# ===================================
# 実装ガイドライン
# ===================================
implementation_notes: |
  ## 更新手順
  1. 実装で値を決定（例: Buttonの高さを40pxに決定）
  2. 該当するyamlファイルを開く
  3. "_TBD_" を具体値に置き換える
  4. metadata.last_updated を更新
  5. 実装メモを追記（任意だが推奨）

  ## 値の記録形式
  - Tailwindクラス名: "h-10" のように記録（後からTailwind設定を見れば具体値がわかる）
  - CSS変数: "var(--color-primary)" のように記録
  - 具体的なピクセル値: "40px" のように記録（どちらでもOK）

  ## 参照ドキュメント
  - docs/common/design/design-system.md - デザインシステム全体
  - docs/common/design/layout-definition.md - レイアウト実装詳細
  - CLAUDE.md - ドキュメント更新ルール
